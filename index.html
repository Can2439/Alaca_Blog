<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alaca Mühendislik Blogu</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <script src="https://cdn.ckeditor.com/ckeditor5/35.3.0/classic/ckeditor.js"></script>
</head>
<body>
    <header>
        <h1>ALACA</h1>
        <nav>
            <a href="#home" class="nav-link" onclick="showSection('home')">Ana Sayfa</a>
            <a href="#about" class="nav-link" onclick="showSection('about')">Hakkımızda</a>
            <a href="#blog" class="nav-link" onclick="showSection('blog')">Blog</a>
            <a href="#forum" class="nav-link" onclick="showSection('forum')">Forum</a>
            <a href="#categories" class="nav-link" onclick="showSection('categories')">Kategoriler</a>
            <a href="#contact" class="nav-link" onclick="showSection('contact')">İletişim</a>
        </nav>
        <div class="user-icon" id="user-icon">
            <i class="fas fa-user-circle fa-2x"></i>
            <div class="dropdown" id="dropdown">
                <div id="login-form">
                    <h3>Giriş Yap</h3>
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Şifre</label>
                        <input type="password" id="login-password" placeholder="Şifre">
                    </div>
                    <button class="submit-button" onclick="login()">Giriş Yap</button>
                    <button class="toggle-button" onclick="toggleForm('register')">Kayıt Ol</button>
                </div>
                <div id="register-form" style="display: none;">
                    <h3>Kayıt Ol</h3>
                    <div class="form-group">
                        <label for="register-email">Email</label>
                        <input type="email" id="register-email" placeholder="Email">
                    </div>
                    <div class="form-group">
                        <label for="register-password">Şifre</label>
                        <input type="password" id="register-password" placeholder="Şifre">
                    </div>
                    <button class="submit-button" onclick="register()">Kayıt Ol</button>
                    <button class="toggle-button" onclick="toggleForm('login')">Giriş Yap</button>
                </div>
            </div>
        </div>
    </header>
    <main>
        <section id="home" class="section">
            <h2>Hoşgeldiniz</h2>
            <p>Alaca Mühendislik Blogu'na hoşgeldiniz. Burada çeşitli mühendislik disiplinlerinde yazılar ve makaleler bulabilirsiniz. Elektrik, mekanik, inşaat, bilgisayar ve kimya mühendisliği gibi alanlarda uzman paylaşımlar ve güncel gelişmeleri takip edebilirsiniz. Blogumuzda mühendislik dünyasındaki yenilikler ve teknik bilgiler hakkında detaylı yazılar bulacaksınız.</p>
            <h2>Popüler Yazılar</h2>
            <div class="card-grid" id="popular-posts">
                <!-- Popüler yazılar burada listelenecek -->
            </div>
            <h2>En Son Eklenen Yazılar</h2>
            <div class="card-grid" id="recent-posts">
                <!-- En son eklenen yazılar burada listelenecek -->
            </div>
        </section>
        <section id="about" class="section" style="display: none;">
            <h2>Hakkımızda</h2>
            <p>Alaca Mühendislik Blogu, mühendislik alanında bilgi paylaşımı ve güncel gelişmeleri takip etmek amacıyla kurulmuştur. Blogumuzda çeşitli mühendislik disiplinlerinden yazılar ve makaleler bulabilirsiniz.</p>
        </section>
        <section id="blog" class="section" style="display: none;">
            <h2>Blog Yazıları</h2>
            <div id="blog-posts">
                <!-- Blog yazıları burada listelenecek -->
            </div>
        </section>
        <section id="forum" class="section" style="display: none;">
            <h2>Forum</h2>
            <div class="editor">
                <div class="form-group">
                    <label for="post-title">Başlık</label>
                    <input type="text" id="post-title" placeholder="Başlık">
                </div>
                <div class="form-group">
                    <label for="post-summary">Özet</label>
                    <input type="text" id="post-summary" placeholder="Özet">
                </div>
                <div class="form-group">
                    <label for="editor">İçerik</label>
                    <textarea id="editor" style="height: 400px;"></textarea>
                </div>
                <button class="submit-button" onclick="submitPost()">Gönder</button>
            </div>
        </section>
        <section id="categories" class="section" style="display: none;">
            <h2>Kategoriler</h2>
            <div class="categories-grid">
                <div class="card category-card">
                    <img src="icons/electrical.png" alt="Elektrik Mühendisliği" class="icon category-icon">
                    <h3>Elektrik Mühendisliği</h3>
                </div>
                <div class="card category-card">
                    <img src="icons/mechanical.png" alt="Makine Mühendisliği" class="icon category-icon">
                    <h3>Makine Mühendisliği</h3>
                </div>
                <div class="card category-card">
                    <img src="icons/civil.png" alt="İnşaat Mühendisliği" class="icon category-icon">
                    <h3>İnşaat Mühendisliği</h3>
                </div>
                <div class="card category-card">
                    <img src="icons/computer.png" alt="Bilgisayar Mühendisliği" class="icon category-icon">
                    <h3>Bilgisayar Mühendisliği</h3>
                </div>
                <div class="card category-card">
                    <img src="icons/chemical.png" alt="Kimya Mühendisliği" class="icon category-icon">
                    <h3>Kimya Mühendisliği</h3>
                </div>
                <div class="card category-card">
                    <img src="icons/industrial.png" alt="Endüstri Mühendisliği" class="icon category-icon">
                    <h3>Endüstri Mühendisliği</h3>
                </div>
            </div>
        </section>
        <section id="contact" class="section" style="display: none;">
            <h2>İletişim</h2>
            <p>Burada iletişim bilgileri yer alacak.</p>
        </section>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var userIcon = document.getElementById('user-icon');
            var dropdown = document.getElementById('dropdown');
            var navLinks = document.querySelectorAll('.nav-link');

            userIcon.addEventListener('mouseover', function() {
                dropdown.classList.add('visible');
            });

            userIcon.addEventListener('mouseleave', function() {
                dropdown.classList.remove('visible');
            });

            navLinks.forEach(function(link) {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    var targetId = this.getAttribute('href').substring(1);
                    showSection(targetId);
                });
            });

            // Show home section by default
            showSection('home');
            loadPosts();

            // Initialize CKEditor
            ClassicEditor
                .create(document.querySelector('#editor'))
                .catch(error => {
                    console.error(error);
                });
        });

        function showSection(sectionId) {
            var sections = document.querySelectorAll('.section');
            sections.forEach(function(section) {
                section.style.display = 'none';
            });
            document.getElementById(sectionId).style.display = 'block';
        }

        function toggleForm(form) {
            var loginForm = document.getElementById('login-form');
            var registerForm = document.getElementById('register-form');
            if (form === 'login') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
            }
        }

        function submitPost() {
            var title = document.getElementById('post-title').value;
            var summary = document.getElementById('post-summary').value;
            var content = document.querySelector('#editor').ckeditorInstance.getData();

            if (title.trim() !== "" && summary.trim() !== "" && content.trim() !== "") {
                var newPost = {
                    title: title,
                    summary: summary,
                    content: content,
                    likes: 0,
                    comments: []
                };

                var posts = JSON.parse(localStorage.getItem('posts')) || [];
                posts.push(newPost);
                localStorage.setItem('posts', JSON.stringify(posts));

                alert('Yazı gönderildi ve blogda yayınlandı.');
                document.getElementById('post-title').value = '';
                document.getElementById('post-summary').value = '';
                document.querySelector('#editor').ckeditorInstance.setData('');
                loadPosts();
                showSection('blog');
            } else {
                alert('Lütfen başlık, özet ve içeriği doldurun.');
            }
        }

        function loadPosts() {
            var posts = JSON.parse(localStorage.getItem('posts')) || [];
            var blogPosts = document.getElementById('blog-posts');
            var popularPosts = document.getElementById('popular-posts');
            var recentPosts = document.getElementById('recent-posts');
            blogPosts.innerHTML = '';
            popularPosts.innerHTML = '';
            recentPosts.innerHTML = '';

            posts.forEach((post, index) => {
                var newPost = document.createElement('div');
                newPost.className = 'card';
                newPost.innerHTML = `
                    <h3>${post.title}</h3>
                    <p>${post.summary}</p>
                    <div class="post-actions">
                        <button onclick="likePost(${index})"><i class="fas fa-thumbs-up"></i> ${post.likes}</button>
                        <button onclick="commentPost(${index})"><i class="fas fa-comment"></i> Yorum Yap</button>
                        <button onclick="sharePost(${index})"><i class="fas fa-share"></i> Paylaş</button>
                    </div>
                    <div class="comments" id="comments-${index}">
                        ${post.comments.map(comment => `<p>${comment}</p>`).join('')}
                    </div>
                `;
                blogPosts.appendChild(newPost);

                var recentPost = newPost.cloneNode(true);
                recentPosts.appendChild(recentPost);
            });

            // Popüler yazıları beğenme sayılarına göre sırala ve ilk üçü göster
            posts.sort((a, b) => b.likes - a.likes).slice(0, 3).forEach((post, index) => {
                var popularPost = document.createElement('div');
                popularPost.className = 'card';
                popularPost.innerHTML = `
                    <h3>${post.title}</h3>
                    <p>${post.summary}</p>
                    <div class="post-actions">
                        <button onclick="likePost(${index})"><i class="fas fa-thumbs-up"></i> ${post.likes}</button>
                        <button onclick="commentPost(${index})"><i class="fas fa-comment"></i> Yorum Yap</button>
                        <button onclick="sharePost(${index})"><i class="fas fa-share"></i> Paylaş</button>
                    </div>
                    <div class="comments" id="comments-${index}">
                        ${post.comments.map(comment => `<p>${comment}</p>`).join('')}
                    </div>
                `;
                popularPosts.appendChild(popularPost);
            });
        }

        function likePost(index) {
            var posts = JSON.parse(localStorage.getItem('posts'));
            posts[index].likes++;
            localStorage.setItem('posts', JSON.stringify(posts));
            loadPosts();
        }

        function commentPost(index) {
            var comment = prompt('Yorumunuzu yazın:');
            if (comment) {
                var posts = JSON.parse(localStorage.getItem('posts'));
                posts[index].comments.push(comment);
                localStorage.setItem('posts', JSON.stringify(posts));
                loadPosts();
            }
        }

        function sharePost(index) {
            var posts = JSON.parse(localStorage.getItem('posts'));
            var post = posts[index];
            var shareText = `${post.title}\n\n${post.summary}\n\nDaha fazla bilgi için blog sitemizi ziyaret edin.`;
            navigator.share({
                title: post.title,
                text: shareText,
                url: window.location.href
            }).catch(console.error);
        }

        function login() {
            var email = document.getElementById('login-email').value;
            var password = document.getElementById('login-password').value;

            // Dummy login validation
            if (email === 'user@example.com' && password === 'password') {
                sessionStorage.setItem('loggedInUser', email);
                alert('Giriş başarılı.');
                window.location.reload();
            } else {
                alert('Hatalı email veya şifre.');
            }
        }

        function register() {
            var email = document.getElementById('register-email').value;
            var password = document.getElementById('register-password').value;

            // Dummy register validation
            if (email && password) {
                alert('Kayıt başarılı. Giriş yapabilirsiniz.');
                toggleForm('login');
            } else {
                alert('Lütfen tüm alanları doldurun.');
            }
        }
    </script>
</body>
</html>
